<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>obnizOS on M5StickC</title>
  <script src="https://obniz.io/js/jquery-3.2.1.min.js"></script>
  <script src="https://unpkg.com/obniz@2.4.0/obniz.js"  crossorigin="anonymous"></script>
  <script src="https://unpkg.com/m5stickcjs/m5stickc.js"></script>
</head>
<body>

<div id="obniz-debug"></div>

buttonA:<span id="buttonA"></span><br/>
buttonB:<span id="buttonB"></span><br/>


<script>


  console.log("start");
  let m5 = new M5StickC('OBNIZ_ID_HERE');

  console.log("connecting");
  m5.onconnect = async function () {
    console.log("connected");


    m5.buttonA.onchange = (state)=>{
      $("#buttonA").text(state ? "pushed" : "released");
    }

    m5.buttonB.onchange = (state)=>{
      $("#buttonB").text(state ? "pushed" : "released");
    }

  };


</script>
</body>
</html>